(this["webpackJsonpuas-pervasive"]=this["webpackJsonpuas-pervasive"]||[]).push([[0],{279:function(e,t){},286:function(e,t,a){},380:function(e,t,a){},382:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),i=a.n(c),s=a(17),o=a(20),l=a(7),d=a(76),j=a(52),h=a(118),u=a(116),b=a(189),m=a.n(b),p=a(30),O=a.n(p),x=a(58),f=a.n(x),g=a(1),v=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={options:{chart:{background:"#f4f4f4",foreColor:"#333"},xaxis:{categories:[]}},series:[{name:"Sales",data:[]}]},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.a.get("https://wpmumn.herokuapp.com/dataChart",{headers:{authtoken:localStorage.getItem("Token")}}).then((function(t){for(var a=0;a<20;a++){var n=JSON.parse(JSON.stringify(e.state.series));n[0].data.push(t.data[a].power),e.setState({series:n})}})),f()("https://wpmumn.herokuapp.com").on("chart_data",(function(t){var a=JSON.parse(JSON.stringify(e.state.series));a[0].data.shift(),e.setState({series:a}),a[0].data.push(t),e.setState({series:a})}))}},{key:"render",value:function(){return Object(g.jsx)("div",{class:"container",children:Object(g.jsx)(m.a,{options:this.state.options,series:this.state.series,type:"line",height:"300",width:"100%"})})}}]),a}(r.a.Component),w=a(446),k=a(444),S=a(191),y=a.n(S),C=a(481),I=a(457);var D,N=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(""),j=Object(s.a)(d,2),h=j[0],u=j[1],b=Object(k.a)((function(e){return{yellowPaper:{backgroundColor:y.a[400]}}}))();return O.a.get("https://wpmumn.herokuapp.com/dashboard/user",{headers:{authtoken:localStorage.getItem("Token")}}).then((function(e){r(e.data.firstname),l(e.data.lastname),u(e.data.deviceID[0])})).catch((function(e){console.log(e)})),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("container",{children:Object(g.jsx)("div",{className:b.root,children:Object(g.jsx)(w.a,{className:b.yellowPaper,elevation:"8",children:Object(g.jsxs)(I.a,{p:1,boxShadow:5,children:[Object(g.jsxs)(C.a,{variant:"h5",children:["Name : ",a," ",o]}),Object(g.jsxs)(C.a,{variant:"h5",children:["Device ID : ",h]})]})})})})})},T=a(27),R=(a(285),a(286),a(477));var F,P=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){D=f()("https://wpmumn.herokuapp.com")}),["https://wpmumn.herokuapp.com"]),Object(n.useEffect)((function(){D.on("voltage_data",(function(e){null!==e&&r(e.toFixed(2))}))})),Object(g.jsxs)("div",{children:[Object(g.jsxs)("h3",{children:[a," V"]}),Object(g.jsx)("h3",{children:" Voltage "})]})};var W,A=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){F=f()("https://wpmumn.herokuapp.com")}),["https://wpmumn.herokuapp.com"]),Object(n.useEffect)((function(){F.on("current_data",(function(e){null!==e&&r(e.toFixed(2))}))})),Object(g.jsxs)("div",{children:[Object(g.jsxs)("h3",{children:[a," A"]}),Object(g.jsx)("h3",{children:" Current "})]})};var E=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){W=f()("https://wpmumn.herokuapp.com")}),["https://wpmumn.herokuapp.com"]),Object(n.useEffect)((function(){W.on("power_data",(function(e){null!==e&&r(e.toFixed(2))}))})),Object(g.jsxs)("div",{children:[Object(g.jsxs)("h3",{children:[a," W"]}),Object(g.jsx)("h3",{children:" Power "})]})},H=a(21),_=a(5),K=a(458),M=a(205),V=a(462),q=a(482),J=a(122),z=["classes","columns","rowHeight","headerHeight"],L=["dataKey"],B=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).getRowClassName=function(t){var a=t.index,n=e.props,r=n.classes,c=n.onRowClick;return Object(_.a)(r.tableRow,r.flexContainer,Object(l.a)({},r.tableRowHover,-1!==a&&null!=c))},e.cellRenderer=function(t){var a=t.cellData,n=t.columnIndex,r=e.props,c=r.columns,i=r.classes,s=r.rowHeight,o=r.onRowClick;return Object(g.jsx)(V.a,{component:"div",className:Object(_.a)(i.tableCell,i.flexContainer,Object(l.a)({},i.noClick,null==o)),variant:"body",style:{height:s},align:null!=n&&c[n].numeric?"right":"left",children:a})},e.headerRenderer=function(t){var a=t.label,n=t.columnIndex,r=e.props,c=r.headerHeight,i=r.columns,s=r.classes;return Object(g.jsx)(V.a,{component:"div",className:Object(_.a)(s.tableCell,s.flexContainer,s.noClick),variant:"head",style:{height:c},align:i[n].numeric?"right":"left",children:Object(g.jsx)("span",{children:a})})},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.columns,r=t.rowHeight,c=t.headerHeight,i=Object(H.a)(t,z);return Object(g.jsx)(J.a,{children:function(t){var s=t.height,l=t.width;return Object(g.jsx)(J.c,Object(o.a)(Object(o.a)({height:s,width:l,rowHeight:r,gridStyle:{direction:"inherit"},headerHeight:c,className:a.table},i),{},{rowClassName:e.getRowClassName,children:n.map((function(t,n){var r=t.dataKey,c=Object(H.a)(t,L);return Object(g.jsx)(J.b,Object(o.a)({headerRenderer:function(t){return e.headerRenderer(Object(o.a)(Object(o.a)({},t),{},{columnIndex:n}))},className:a.flexContainer,cellRenderer:e.cellRenderer,dataKey:r},c),r)}))}))}})}}]),a}(n.PureComponent);B.defaultProps={headerHeight:48,rowHeight:48};var U,G,X,Y,Q,Z,$=Object(M.a)(),ee=Object(K.a)((function(e){return{flexContainer:{display:"flex",alignItems:"center",boxSizing:"border-box"},table:{"& .ReactVirtualized__Table__headerRow":Object(o.a)(Object(o.a)({},"rtl"===e.direction&&{paddingLeft:"0 !important"}),"rtl"!==e.direction&&{paddingRight:void 0})},tableRow:{cursor:"pointer"},tableRowHover:{"&:hover":{backgroundColor:e.palette.grey[200]}},tableCell:{flex:1},noClick:{cursor:"initial"}}}),{defaultTheme:$})(B);function te(e,t,a,n,r,c,i){return{number:e,id_device:t,sensor:a,voltage:n,current:r,power:c,date:i}}var ae=[];function ne(){return Object(g.jsx)(q.a,{style:{height:400,width:"95%"},children:Object(g.jsx)(ee,{rowCount:ae.length,rowGetter:function(e){var t=e.index;return ae[t]},columns:[{width:80,label:"No.",dataKey:"number",numeric:!0},{width:200,label:"ID_Device",dataKey:"id_device"},{width:80,label:"Sensor",dataKey:"sensor"},{width:120,label:"Voltage (Volt)",dataKey:"voltage",numeric:!0},{width:120,label:"Current (mA)",dataKey:"current",numeric:!0},{width:120,label:"Power (Watt)",dataKey:"power",numeric:!0},{width:300,label:"Time Stamp",dataKey:"date",numeric:!0}]})})}O.a.get("https://wpmumn.herokuapp.com/dataTable",{headers:{authtoken:localStorage.getItem("Token")}}).then((function(e){for(var t=0;t<e.data.length&&t<50400;t+=1)U=e.data[t].deviceID,G=e.data[t].sensor,X=e.data[t].voltage,Y=e.data[t].current,Q=e.data[t].power,Z=e.data[t].timestamp,ae.push(te(t+1,U,G,X,Y,Q,Z))}));var re=a(461),ce=a(475),ie=a(476),se=a(201),oe=a.n(se),le=a(202),de=a.n(le),je=a(472),he=a(473),ue=a(471),be=a(198),me=a.n(be),pe=a(200),Oe=a.n(pe),xe=a(199),fe=a.n(xe),ge=a(469),ve=a(464),we=a(468),ke=a(470),Se=a(474),ye=a(455),Ce=a(6),Ie=a(47),De=a(203),Ne=a.n(De),Te=200,Re=function(e){return{width:Te,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}},Fe=function(e){return Object(l.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:"calc(".concat(e.spacing(0)," + 1px)")},e.breakpoints.up("sm"),{width:"calc(".concat(e.spacing(0)," + 1px)")})},Pe=Object(Ce.a)("div")((function(e){var t=e.theme;return Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar)})),We=Object(Ce.a)(we.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(o.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{marginLeft:Te,width:"calc(100% - ".concat(Te,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),Ae=Object(Ce.a)(ve.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(o.a)(Object(o.a)({width:Te,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},a&&Object(o.a)(Object(o.a)({},Re(t)),{},{"& .MuiDrawer-paper":Re(t)})),!a&&Object(o.a)(Object(o.a)({},Fe(t)),{},{"& .MuiDrawer-paper":Fe(t)}))}));function Ee(){var e=Object(T.f)();O.a.get("https://wpmumn.herokuapp.com/checkDevice",{headers:{authtoken:localStorage.getItem("Token")}}).then((function(t){if(null===t.data.device)e.push("/inputdevice");else{var a="/dashboard/"+t.data.username;window.location.pathname!=a&&e.push("/dashboard/"+t.data.username)}}));var t=Object(Ie.a)(),a=n.useState(!1),r=Object(s.a)(a,2),c=r[0],i=r[1];return Object(g.jsxs)(ge.a,{sx:{display:"flex"},children:[Object(g.jsx)(ye.a,{}),Object(g.jsx)(We,{position:"fixed",open:c,children:Object(g.jsxs)(ke.a,{children:[Object(g.jsx)(ue.a,{color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},edge:"start",sx:Object(o.a)({marginRight:"36px"},c&&{display:"none"}),children:Object(g.jsx)(me.a,{})}),Object(g.jsx)(je.a,{variant:"h6",noWrap:!0,component:"div",children:"Wireless Power Meter"})]})}),Object(g.jsxs)(Ae,{variant:"permanent",open:c,children:[Object(g.jsx)(Pe,{children:Object(g.jsx)(ue.a,{onClick:function(){i(!1)},children:"rtl"===t.direction?Object(g.jsx)(fe.a,{}):Object(g.jsx)(Oe.a,{})})}),Object(g.jsx)(he.a,{}),Object(g.jsx)(Se.a,{children:["Device"].map((function(e,t){return Object(g.jsxs)(re.a,{button:!0,children:[Object(g.jsx)(ce.a,{children:t%2===0?Object(g.jsx)(oe.a,{}):Object(g.jsx)(de.a,{})}),Object(g.jsx)(ie.a,{primary:e})]},e)}))}),Object(g.jsx)(he.a,{}),Object(g.jsx)(Se.a,{children:Object(g.jsxs)(re.a,{button:!0,onClick:function(){localStorage.removeItem("isAuthenticated"),localStorage.removeItem("Token"),window.location.pathname="/"},children:[Object(g.jsx)(ce.a,{children:Object(g.jsx)(Ne.a,{})}),Object(g.jsx)(ie.a,{primary:"Logout"})]},"Logout")})]}),Object(g.jsxs)(ge.a,{component:"main",sx:{flexGrow:1,p:3},children:[Object(g.jsx)(R.a,{children:Object(g.jsx)("div",{class:"test",children:Object(g.jsxs)("div",{className:"align-center",children:[Object(g.jsxs)("div",{class:"float-child",children:[Object(g.jsx)("div",{class:"paper",children:Object(g.jsx)(N,{})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{class:"float-child2 card",children:Object(g.jsx)(P,{})}),Object(g.jsx)("div",{class:"float-child2 card",children:Object(g.jsx)(A,{})}),Object(g.jsx)("div",{class:"float-child2 card",children:Object(g.jsx)(E,{})})]})]}),Object(g.jsx)("div",{class:"float-child",children:Object(g.jsx)(v,{})})]})})}),Object(g.jsx)(R.a,{children:Object(g.jsx)("div",{class:"tableposition",children:Object(g.jsx)("div",{class:"vtable",children:Object(g.jsx)(ne,{})})})})]})]})}var He=a(465),_e=a(480),Ke=a(456),Me=a(478),Ve=a(466),qe=a(115),Je=a.n(qe),ze=a(479),Le=a(467);function Be(e){return Object(g.jsxs)(je.a,Object(o.a)(Object(o.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(g.jsx)(Me.a,{color:"inherit",href:"https://material-ui.com/",children:"WPM"})," ",(new Date).getFullYear(),"."]}))}var Ue=Object(M.a)();function Ge(){var e=Object(T.f)();"undefined"!==localStorage.getItem("Token")&&O.a.get("https://wpmumn.herokuapp.com/dashboard/user",{headers:{authtoken:localStorage.getItem("Token")}}).then((function(t){e.push("/dashboard/"+t.data.firstname+t.data.lastname)}));var t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],c=a[1];return Object(g.jsx)(Le.a,{theme:Ue,children:Object(g.jsxs)(ze.a,{component:"main",maxWidth:"xs",children:[Object(g.jsx)(ye.a,{}),Object(g.jsxs)(ge.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(g.jsx)(He.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(g.jsx)(Je.a,{})}),Object(g.jsx)(je.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(g.jsxs)(ge.a,{component:"form",onSubmit:function(e){e.preventDefault(),localStorage.clear();var t=new FormData(e.currentTarget);O.a.post("https://wpmumn.herokuapp.com/login",{username:t.get("email"),password:t.get("password")}).then((function(e){1===e.data.status?(localStorage.setItem("isAuthenticated",!0),localStorage.setItem("Token",e.data.access),0===e.data.deviceid.length?window.location.pathname="/inputdevice":window.location.pathname="/dashboard/"+e.data.username):2===e.data.status&&c(e.data.messages)}))},noValidate:!0,sx:{mt:1},children:[Object(g.jsx)(Ke.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(g.jsx)(Ke.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(g.jsx)("h6",{children:r}),Object(g.jsx)(_e.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(g.jsx)(Ve.a,{container:!0,children:Object(g.jsx)(Ve.a,{item:!0,children:Object(g.jsx)(Me.a,{href:"/Signup",variant:"body2",children:"Don't have an account? Sign Up"})})})]})]}),Object(g.jsx)(Be,{sx:{mt:8,mb:4}})]})})}var Xe=a(87),Ye=a.n(Xe);function Qe(e){return Object(g.jsxs)(je.a,Object(o.a)(Object(o.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(g.jsx)(Me.a,{color:"inherit",href:"https://material-ui.com/",children:"WPM"})," ",(new Date).getFullYear(),"."]}))}var Ze=Object(M.a)();function $e(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(g.jsx)(Le.a,{theme:Ze,children:Object(g.jsxs)(ze.a,{component:"main",maxWidth:"xs",children:[Object(g.jsx)(ye.a,{}),Object(g.jsxs)(ge.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(g.jsx)(He.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(g.jsx)(Je.a,{})}),Object(g.jsx)(je.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(g.jsxs)(ge.a,{component:"form",noValidate:!0,onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);!0===Ye.a.isEmail(t.get("email"))&&""!==t.get("firstName")&&""!==t.get("password")?O.a.post("https://wpmumn.herokuapp.com/register",{email:t.get("email"),password:t.get("password"),firstname:t.get("firstName"),lastname:t.get("lastName")}).then((function(e){console.log(e),null==e.data.message?(r("Berhasil mendaftar!"),alert("Berhasil mendaftar"),window.location.pathname="/"):r(e.data.message)})):""===t.get("firstName")&&""===t.get("password")?r("Semua data (kecuali nama belakang) harus diisi"):""===t.get("firstName")?r("Firstname harus diisi!"):""===t.get("email")?r("Email belum diisi!"):""===t.get("password")?r("Password belum diisi!"):!0!==Ye.a.isEmail(t.get("email"))&&""!==t.get("firstName")&&""!==t.get("password")&&r("Format email salah!")},sx:{mt:3},children:[Object(g.jsxs)(Ve.a,{container:!0,spacing:2,children:[Object(g.jsx)(Ve.a,{item:!0,xs:12,sm:6,children:Object(g.jsx)(Ke.a,{autoComplete:"fname",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),Object(g.jsx)(Ve.a,{item:!0,xs:12,sm:6,children:Object(g.jsx)(Ke.a,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"})}),Object(g.jsx)(Ve.a,{item:!0,xs:12,children:Object(g.jsx)(Ke.a,{required:!0,fullWidth:!0,id:"email",type:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(g.jsx)(Ve.a,{item:!0,xs:12,children:Object(g.jsx)(Ke.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})}),Object(g.jsx)(Ve.a,{item:!0,xs:12,children:Object(g.jsx)("h6",{children:a})})]}),Object(g.jsx)(_e.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(g.jsx)(Ve.a,{container:!0,justifyContent:"flex-end",children:Object(g.jsx)(Ve.a,{item:!0,children:Object(g.jsx)(Me.a,{href:"/",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(g.jsx)(Qe,{sx:{mt:5}})]})})}a(380);function et(){return Object(g.jsx)("div",{className:"containerTOP",children:Object(g.jsxs)("div",{class:"box",children:[Object(g.jsx)("div",{className:"formNewUser",children:Object(g.jsx)("h3",{children:"Input New Device"})}),Object(g.jsx)("hr",{}),Object(g.jsx)("div",{className:"IDform",children:Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(e.currentTarget);!0===Ye.a.isMACAddress(t.get("idDevice"))?O.a.post("https://wpmumn.herokuapp.com/addDevice",{idDevice:t.get("idDevice")},{headers:{authtoken:localStorage.getItem("Token")}}).then((function(e){1===e.data.status?(alert(e.data.message),O.a.post("https://wpmumn.herokuapp.com/login",{username:e.data.email,password:e.data.password}).then((function(e){localStorage.setItem("isAuthenticated",!0),localStorage.setItem("Token",e.data.access),null===e.data.deviceid?window.location.pathname="/inputdevice":null!==e.data.deviceid&&(window.location.pathname="/dashboard/"+e.data.username)}))):(alert(e.data.message),window.location.pathname="/inputdevice")})):""===t.get("idDevice")?alert("Masukan ID device anda"):alert("ID tidak sesuai")},children:[Object(g.jsx)("label",{children:Object(g.jsx)("b",{children:"ID Device : "})}),Object(g.jsx)("input",{name:"idDevice",placeholder:"Insert your device ID"}),Object(g.jsx)("br",{}),Object(g.jsxs)("div",{className:"btnPadBot btnposition",children:[Object(g.jsx)("input",{className:"btnSubmit ",type:"submit",value:"Submit"}),Object(g.jsx)("input",{className:"btnCancel",type:"reset",onClick:function(){O.a.get("https://wpmumn.herokuapp.com/checkdevice",{headers:{authtoken:localStorage.getItem("Token")}}).then((function(e){null===e.data.device?(localStorage.removeItem("isAuthenticated"),localStorage.removeItem("Token"),window.location.pathname="/"):window.location.pathname="/dashboard/"+e.data.username}))},value:"Cancel"})]})]})})]})})}var tt=["component"];var at=function(e){var t=e.component,a=Object(H.a)(e,tt),n=localStorage.getItem("isAuthenticated");return Object(g.jsx)(T.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){return n?Object(g.jsx)(t,{}):Object(g.jsx)(T.a,{to:{pathname:"/",state:{from:e.location}}})}}))},nt=a(99);function rt(){return Object(g.jsxs)(nt.a,{children:[Object(g.jsx)(T.b,{exact:!0,path:"/",component:Ge}),Object(g.jsx)(T.b,{path:"/signup",component:$e}),Object(g.jsx)(at,{path:"/inputdevice",component:et}),Object(g.jsx)(at,{path:"/dashboard/:username",component:Ee})]})}a(381);i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(rt,{})}),document.getElementById("root"))}},[[382,1,2]]]);
//# sourceMappingURL=main.8a6e990b.chunk.js.map